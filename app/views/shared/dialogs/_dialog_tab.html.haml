- auto_refreshable_field_indicies = []
- tab.dialog_groups.each_with_index do |group, group_index|
  - auto_refreshable_field_indicies[group_index] = []
  - group.dialog_fields.each_with_index do |field, field_index|
    - if field.auto_refresh
      - auto_refreshable_field_indicies[group_index] << field_index

-# Replace any nils with an empty array for JSON parsing
- auto_refreshable_field_indicies = auto_refreshable_field_indicies.map(&:to_a)
- tab.dialog_groups.each_with_index do |group, group_index|
  = render :partial => "shared/dialogs/dialog_group",
           :locals  => {:wf => wf, :group => group, :group_index => group_index, :tab_index => tab_index, :auto_refreshable_field_indicies => auto_refreshable_field_indicies}
